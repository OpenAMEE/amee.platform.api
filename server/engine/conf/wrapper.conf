#encoding=UTF-8
# Configuration files must begin with a line specifying the encoding of the the file.
#
# This is the core wrapper config file.
# You may override default environment variables in wrapper.conf.local.
#

# Allow us to skip numbers in configuration sequences.
# See: http://wrapper.tanukisoftware.org/doc/english/prop-ignore-sequence-gaps.html
wrapper.ignore_sequence_gaps=TRUE

# AMEE_HOME
set.default.AMEE_APP_NAME=platform-api
set.default.AMEE_SERVER_NAME=localhost
set.default.AMEE_INSTANCE_NAME=local
set.default.AMEE_HOME=/var/www/apps/%AMEE_APP_NAME%-%AMEE_INSTANCE_NAME%

# Environment variables
set.default.CURRENT_HOME=%AMEE_HOME%/current
set.default.JDK_HOME=%JAVA_HOME%
set.default.LIB_HOME=%CURRENT_HOME%/lib
set.default.DB_DRIVER=com.mysql.jdbc.Driver
set.default.DB_URL_PREFIX=jdbc
set.default.CONF_HOME=%CURRENT_HOME%/conf
set.default.AUTO_START_SCHEDULER=true
set.default.RABBIT_MQ_ADDRESS=127.0.0.1
set.default.RABBIT_MQ_PORT=5672
set.default.RABBIT_MQ_USERNAME=guest
set.default.RABBIT_MQ_PASSWORD=guest
set.default.MESSAGING_RUN_SLEEP=30000
set.default.MESSAGING_SCOPE=live
set.default.SPRING_VERSION=3.0.2.RELEASE
set.default.LUCENE_PATH=%AMEE_HOME%/lucene/index

# Import platform specific variables (looks like a comment but is correct)
#include %AMEE_HOME%/shared/wrapper.conf

# Log levels
set.default.LOG_LEVEL=INFO
set.default.DEFAULT_LOG_LEVEL=INFO
set.default.MAILLOG=true
set.default.HOPTOAD=true

# Search index.
set.default.MASTER_INDEX=true
set.default.SNAPSHOT_ENABLED=true
set.default.CLEAR_INDEX=false
set.default.CHECK_DATA_CATEGORIES=false
set.default.INDEX_DATA_CATEGORIES=false
set.default.INDEX_DATA_ITEMS=false
set.default.INDEX_DATA_CATEGORY_PATH_PREFIX=/

# Time zone - To use the server default time zone comment this out and the timeZone 'wrapper.app.parameter' entries below.
set.default.AMEE_TIME_ZONE=UTC

# Application parameters
wrapper.app.parameter.1=-appName
wrapper.app.parameter.2=%AMEE_APP_NAME%
wrapper.app.parameter.3=-serverName
wrapper.app.parameter.4=%AMEE_SERVER_NAME%
wrapper.app.parameter.5=-instanceName
wrapper.app.parameter.6=%AMEE_INSTANCE_NAME%
wrapper.app.parameter.7=-timeZone
wrapper.app.parameter.8=%AMEE_TIME_ZONE%

# Java and Wrapper
wrapper.java.command=%JAVA_HOME%/bin/java
wrapper.java.mainclass=com.amee.restlet.engine.RestletEngine

# Libraries
wrapper.java.classpath.1=%LIB_HOME%/*.jar
wrapper.java.classpath.2=%CURRENT_HOME%/conf

# Java Parameters
wrapper.java.additional.1=-server
wrapper.java.additional.2=-Dfile.encoding=UTF-8
wrapper.java.additional.3=-Djava.awt.headless=true
wrapper.java.additional.4=-Dsun.lang.ClassLoader.allowArraySyntax=true
wrapper.java.additional.5=-Dlog4j.configuration=log4j.xml
wrapper.java.additional.6=-Dlog4j.debug
wrapper.java.additional.7=-Damee.keyFile=%AMEE_HOME%/shared/crypto/amee.key
wrapper.java.additional.8=-Damee.saltFile=%AMEE_HOME%/shared/crypto/amee.salt
wrapper.java.additional.9=-Damee.logLevel=%LOG_LEVEL%
wrapper.java.additional.10=-Damee.defaultLogLevel=%DEFAULT_LOG_LEVEL%
wrapper.java.additional.11=-javaagent:%LIB_HOME%/spring-instrument-%SPRING_VERSION%.jar
wrapper.java.additional.12=-XX:+HeapDumpOnOutOfMemoryError
wrapper.java.additional.13=-XX:HeapDumpPath=%AMEE_HOME%/shared/log
wrapper.java.additional.14=-Dapp.name=%AMEE_APP_NAME%
wrapper.java.additional.15=-Dserver.name=%AMEE_SERVER_NAME%
wrapper.java.additional.16=-Dinstance.name=%AMEE_INSTANCE_NAME%
wrapper.java.additional.17=-Dnet.sf.ehcache.disableShutdownHook=true
wrapper.java.additional.18=-Damee.cacheProviderClass=%CACHE_PROVIDER_CLASS%
wrapper.java.additional.19=-Damee.useSecondLevelCache=true
wrapper.java.additional.20=-Damee.useQueryCache=true
wrapper.java.additional.21=-Damee.hibernateDialect=org.hibernate.dialect.MySQLInnoDBDialect
wrapper.java.additional.22=-Damee.lucenePath=%LUCENE_PATH%
wrapper.java.additional.23=-Damee.clearIndex=%CLEAR_INDEX%
wrapper.java.additional.24=-Damee.checkDataCategories=%CHECK_DATA_CATEGORIES%
wrapper.java.additional.25=-Damee.indexDataCategories=%INDEX_DATA_CATEGORIES%
wrapper.java.additional.26=-Damee.indexDataItems=%INDEX_DATA_ITEMS%
wrapper.java.additional.27=-Damee.dataCategoryPathPrefix=%INDEX_DATA_CATEGORY_PATH_PREFIX%
wrapper.java.additional.28=-Damee.masterIndex=%MASTER_INDEX%
wrapper.java.additional.29=-Damee.maillog=%MAILLOG%
wrapper.java.additional.30=-Damee.hoptoad=%HOPTOAD%
wrapper.java.additional.31=-Damee.snapshotEnabled=%SNAPSHOT_ENABLED%

# TODO: Extra Java Parameters to consider.
#wrapper.java.additional.???=-XX:PermSize=64m
#wrapper.java.additional.???=-XX:MaxPermSize=64m
#wrapper.java.additional.???=-XX:+DisableExplicitGC
#wrapper.java.additional.???=-XX:+UseParNewGC
#wrapper.java.additional.???=-XX:+CMSParallelRemarkEnabled
#wrapper.java.additional.???=-XX:+UseConcMarkSweepGC

# NOTE: when adding more of these make sure to increment numbering in other wrapper.conf files (wrapper.conf.local).

# Wrapper Logging Properties
wrapper.console.format=PM
wrapper.console.loglevel=%DEFAULT_LOG_LEVEL%
wrapper.logfile=%AMEE_HOME%/shared/log/wrapper.log
wrapper.logfile.format=M
wrapper.logfile.loglevel=%DEFAULT_LOG_LEVEL%
wrapper.logfile.maxsize=10m
wrapper.logfile.maxfiles=20
wrapper.logfile.rollmode=SIZE_OR_JVM
wrapper.syslog.loglevel=NONE

# Timeout values (seconds)
wrapper.startup.timeout=300

# Cache implementation - EhCache
set.default.CACHE_PROVIDER_CLASS=net.sf.ehcache.hibernate.SingletonEhCacheProvider
set.default.CACHE_SERVICE_CLASS=com.amee.base.cache.EhCacheCacheService
set.default.CACHE_MANAGER_CLASS=org.springframework.cache.ehcache.EhCacheManagerFactoryBean

# Cache implementation - Memcached
# set.default.CACHE_PROVIDER_CLASS=com.googlecode.hibernate.memcached.MemcachedCacheProvider
# set.default.CACHE_SERVICE_CLASS=com.amee.base.cache.EhCacheCacheService
# set.default.CACHE_MANAGER_CLASS=com.amee.base.cache.NoOpEhCacheManagerFactoryBean
